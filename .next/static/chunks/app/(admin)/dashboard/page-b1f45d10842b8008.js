(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{970:function(e,t,r){Promise.resolve().then(r.bind(r,8058))},8058:function(e,t,r){"use strict";let a,n;r.r(t),r.d(t,{default:function(){return m}});var l=r(7437),s=r(2265);let i=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,o=function(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,a,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(a=e(t[r]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a)}return n}(e))&&(a&&(a+=" "),a+=t);return a},c=(a="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",n={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==n?void 0:n.variants)==null)return o(a,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:r,defaultVariants:l}=n,s=Object.keys(r).map(t=>{let a=null==e?void 0:e[t],n=null==l?void 0:l[t];if(null===a)return null;let s=i(a)||i(n);return r[t][s]}),c=e&&Object.entries(e).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return o(a,s,null==n?void 0:null===(t=n.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...c}[t]):({...l,...c})[t]===r})?[...e,r,a]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),d=s.forwardRef((e,t)=>{let{className:r,variant:a,size:n,...s}=e;return(0,l.jsx)("button",{className:c({variant:a,size:n,className:r}),ref:t,...s})});d.displayName="Button";var u=r(4608);function f(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)(""),[n,i]=(0,s.useState)(""),[o,c]=(0,s.useState)(null),[f,m]=(0,s.useState)(!0),[x,h]=(0,s.useState)(null),p=async()=>{try{let e=await fetch("/api/articles");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();t(r.articles)}catch(e){console.error("Failed to fetch articles:",e),h("Failed to load articles.")}finally{m(!1)}};(0,s.useEffect)(()=>{p()},[]);let v=async e=>{if(e.preventDefault(),r&&n)try{let e;if(!(e=o?await fetch("/api/articles/".concat(o),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,content:n})}):await fetch("/api/articles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,content:n})})).ok)throw Error("HTTP error! status: ".concat(e.status));a(""),i(""),c(null),p()}catch(e){console.error("Failed to save article:",e),h("Failed to save article.")}},b=e=>{a(e.title),i(e.content),c(e.id)},g=async e=>{try{let t=await fetch("/api/articles/".concat(e),{method:"DELETE"});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));p()}catch(e){console.error("Failed to delete article:",e),h("Failed to delete article.")}};return f?(0,l.jsx)("p",{className:"text-xl",children:"Loading admin panel..."}):x?(0,l.jsxs)("p",{className:"text-xl text-red-500",children:["Error: ",x]}):(0,l.jsxs)("div",{className:"w-full max-w-4xl mx-auto p-4",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center",children:"Admin Panel - Manage Articles"}),(0,l.jsxs)(u.Zb,{className:"mb-8",children:[(0,l.jsx)(u.Ol,{children:(0,l.jsx)(u.ll,{children:o?"Edit Article":"Add New Article"})}),(0,l.jsx)(u.aY,{children:(0,l.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,l.jsx)("input",{type:"text",id:"title",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border",value:r,onChange:e=>a(e.target.value),required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content"}),(0,l.jsx)("textarea",{id:"content",rows:5,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border",value:n,onChange:e=>i(e.target.value),required:!0})]}),(0,l.jsx)(d,{type:"submit",children:o?"Update Article":"Add Article"}),o&&(0,l.jsx)(d,{type:"button",variant:"outline",onClick:()=>{c(null),a(""),i("")},className:"ml-2",children:"Cancel Edit"})]})})]}),(0,l.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"Existing Articles"}),(0,l.jsx)("div",{className:"space-y-4",children:e.length>0?e.map(e=>(0,l.jsxs)(u.Zb,{children:[(0,l.jsx)(u.Ol,{children:(0,l.jsx)(u.ll,{children:e.title})}),(0,l.jsxs)(u.aY,{className:"flex justify-between items-center",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.content}),(0,l.jsxs)("div",{className:"flex space-x-2 ml-4",children:[(0,l.jsx)(d,{variant:"secondary",onClick:()=>b(e),children:"Edit"}),(0,l.jsx)(d,{variant:"destructive",onClick:()=>g(e.id),children:"Delete"})]})]})]},e.id)):(0,l.jsx)("p",{className:"text-gray-600",children:"No articles found."})})]})}function m(){return(0,l.jsx)("main",{className:"flex min-h-screen flex-col items-center p-8 md:p-24 bg-gray-100",children:(0,l.jsx)(f,{})})}},4608:function(e,t,r){"use strict";r.d(t,{Ol:function(){return s},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},ll:function(){return i}});var a=r(7437),n=r(2265);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:"rounded-lg border bg-card text-card-foreground shadow-sm ".concat(r),...n})});l.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:"flex flex-col space-y-1.5 p-6 ".concat(r),...n})});s.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:"text-2xl font-semibold leading-none tracking-tight ".concat(r),...n})});i.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:"text-sm text-muted-foreground ".concat(r),...n})});o.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:"p-6 pt-0 ".concat(r),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:"flex items-center p-6 pt-0 ".concat(r),...n})}).displayName="CardFooter"}},function(e){e.O(0,[971,23,744],function(){return e(e.s=970)}),_N_E=e.O()}]);